<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/9c74a791f2.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="style.css">
    <title>VMS</title>
</head>

<body>

    <form method="post" action="./crear">

        <h1>Envia un mensaje</h1>

        <div>
            <h2>Linea 1</h2>
            <input placeholder="Escribe tu mensaje" type="text" name="linea1" required maxlength="14" />
            <div class="allmenu">
                <input type="checkbox" class="chkColor" id="expander-1">
                <label for="expander-1" tooltip="Agrega un color">
                    <i class="fa-solid fa-palette"></i>
                </label>

                <label class="hex" id="colorLabel1">#FFFFFF</label>
                <input type="hidden" id="colorInput1" name="colorlinea1" />

                <label class="uc">
                    <input type="checkbox" name="imagenlinea1" value="uc">
                </label>

                <label class="sem">
                    <input type="checkbox" name="imagenlinea1" value="sem">
                </label>

                <label class="slo">
                    <input type="checkbox" name="imagenlinea1" value="slo">
                </label>

                <ul id="colorpicker1">
                    <li>
                        <label class="r">
                            <input type="radio" name="color1" class="Mysc">
                        </label>
                    </li>
                    <li>
                        <label class="p">
                            <input type="radio" name="color1" class="Mysc">
                        </label>
                    </li>
                    <li>
                        <label class="m">
                            <input type="radio" name="color1" class="Mysc">
                        </label>
                    </li>
                    <li>
                        <label class="c">
                            <input type="radio" name="color1" class="Mysc">
                        </label>
                    </li>
                    <li>
                        <label class="g">
                            <input type="radio" name="color1" class="Mysc">
                        </label>
                    </li>
                    <li>
                        <label class="a">
                            <input type="radio" name="color1" class="Mysc">
                        </label>
                    </li>
                    <li>
                        <label class="na">
                            <input type="radio" name="color1" class="Mysc">
                        </label>
                    </li>
                    <li>
                        <label class="b">
                            <input type="radio" name="color1" class="Mysc">
                        </label>
                    </li>
                </ul>
            </div>
        </div>

        <hr>

        <div>
            <h2>Linea 2</h2>
            <input placeholder="Escribe tu mensaje" type="text" name="linea2" required maxlength="14" />
            <div class="allmenu">
                <input type="checkbox" class="chkColor" id="expander-2">
                <label for="expander-2">
                    <i class="fa-solid fa-palette"></i>
                </label>

                <label class="hex" id="colorLabel2">#FFFFFF</label>
                <input type="hidden" id="colorInput2" name="colorlinea2" />


                <label class="uc">
                    <input type="checkbox" name="imagenlinea2" value="uc">
                </label>

                <label class="sem">
                    <input type="checkbox" name="imagenlinea2" value="sem">
                </label>

                <label class="slo">
                    <input type="checkbox" name="imagenlinea2" value="slo">
                </label>

                <ul id="colorpicker2">
                    <li>
                        <label class="r">
                            <input type="radio" name="color2" class="Mysc">
                        </label>
                    </li>
                    <li>
                        <label class="p">
                            <input type="radio" name="color2" class="Mysc">
                        </label>
                    </li>
                    <li>
                        <label class="m">
                            <input type="radio" name="color2" class="Mysc">
                        </label>
                    </li>
                    <li>
                        <label class="c">
                            <input type="radio" name="color2" class="Mysc">
                        </label>
                    </li>
                    <li>
                        <label class="g">
                            <input type="radio" name="color2" class="Mysc">
                        </label>
                    </li>
                    <li>
                        <label class="a">
                            <input type="radio" name="color2" class="Mysc">
                        </label>
                    </li>
                    <li>
                        <label class="na">
                            <input type="radio" name="color2" class="Mysc">
                        </label>
                    </li>
                    <li>
                        <label class="b">
                            <input type="radio" name="color2" class="Mysc">
                        </label>
                    </li>
                </ul>
            </div>
        </div>

        <hr>

        <div>
            <h2>Linea 3</h2>
            <input placeholder="Escribe tu mensaje" type="text" name="linea3" required maxlength="14" />
            <div class="allmenu">
                <input type="checkbox" class="chkColor" id="expander-3">
                <label for="expander-3">
                    <i class="fa-solid fa-palette"></i>
                </label>

                <label class="hex" id="colorLabel3">#FFFFFF</label>
                <input type="hidden" id="colorInput3" name="colorlinea3" />


                <label class="uc">
                    <input type="checkbox"name="imagenlinea3" value="uc">
                </label>

                <label class="sem">
                    <input type="checkbox" name="imagenlinea3" value="sem">
                </label>

                <label class="slo">
                    <input type="checkbox" name="imagenlinea3" value="slo">
                </label>

                <ul id="colorpicker3">
                    <li>
                        <label class="r">
                            <input type="radio" name="color3" class="Mysc">
                        </label>
                    </li>
                    <li>
                        <label class="p">
                            <input type="radio" name="color3" class="Mysc">
                        </label>
                    </li>
                    <li>
                        <label class="m">
                            <input type="radio" name="color3" class="Mysc">
                        </label>
                    </li>
                    <li>
                        <label class="c">
                            <input type="radio" name="color3" class="Mysc">
                        </label>
                    </li>
                    <li>
                        <label class="g">
                            <input type="radio" name="color3" class="Mysc">
                        </label>
                    </li>
                    <li>
                        <label class="a">
                            <input type="radio" name="color3" class="Mysc">
                        </label>
                    </li>
                    <li>
                        <label class="na">
                            <input type="radio" name="color3" class="Mysc">
                        </label>
                    </li>
                    <li>
                        <label class="b">
                            <input type="radio" name="color3" class="Mysc">
                        </label>
                    </li>
                </ul>
            </div>
        </div>

        <hr>

        <input type="submit" value="Enviar" />

    </form>

    <script>

        document.addEventListener("DOMContentLoaded", function () {

            var grupos = document.querySelectorAll(".allmenu");
            grupos.forEach(function (grupo) {
                var labels = grupo.querySelectorAll("label");

                labels.forEach(function (label) {

                    label.addEventListener("click", function () {
                        var checkbox = label.querySelector("input[type='checkbox']");
                        var isChecked = checkbox.checked;

                        var checkboxesEnGrupo = grupo.querySelectorAll("input[type='checkbox']");
                        checkboxesEnGrupo.forEach(function (cb) {
                            cb.parentNode.classList.remove("selected");
                        });

                        if (isChecked) {
                            label.classList.add("selected");
                        }
                    });
                });
            });
        });

        function deseleccionarOtrosEnGrupo(checkbox) {
            var grupo = checkbox.getAttribute('name');
            var checkboxes = document.querySelectorAll('input[type="checkbox"][name="' + grupo + '"]');
            checkboxes.forEach(function (cb) {
                if (cb !== checkbox) {
                    cb.checked = false;
                }
            });
        }


        var checkboxes = document.querySelectorAll('input[type="checkbox"]');
        checkboxes.forEach(function (checkbox) {
            checkbox.addEventListener('change', function () {
                deseleccionarOtrosEnGrupo(checkbox);
            });
        });

        document.addEventListener("DOMContentLoaded", function () {

            function cambiarColorLabel1() {
                var colorpicker = document.getElementById("colorpicker1");
                var colorLabel = document.getElementById("colorLabel1");
                var colorInput1 = document.getElementById("colorInput1");


                var liSeleccionado = colorpicker.querySelector("input[type='radio']:checked").parentElement;

                var colorFondo = window.getComputedStyle(liSeleccionado).getPropertyValue("background-color");

                var hexadecimal = rgbToHex(colorFondo);

                colorLabel.textContent = hexadecimal;

                colorInput1.value = hexadecimal;

                colorLabel.style.color = hexadecimal;
            }

            function rgbToHex(color) {
                var valores = color.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);

                function componentToHex(c) {
                    var hex = parseInt(c).toString(16);
                    return hex.length == 1 ? "0" + hex : hex;
                }

                var hexadecimal = "#" + componentToHex(valores[1]) + componentToHex(valores[2]) + componentToHex(valores[3]);
                return hexadecimal;
            }

            var radios = document.querySelectorAll("#colorpicker1 input[type='radio']");
            radios.forEach(function (radio) {
                radio.addEventListener("click", function () {
                    cambiarColorLabel1();
                });
            });

            cambiarColorLabel1();
        });

        document.addEventListener("DOMContentLoaded", function () {
            function cambiarColorLabel2() {
                var colorpicker = document.getElementById("colorpicker2");
                var colorLabel = document.getElementById("colorLabel2");
                var colorInput2 = document.getElementById("colorInput2");
                var liSeleccionado = colorpicker.querySelector("input[type='radio']:checked").parentElement;

                var colorFondo = window.getComputedStyle(liSeleccionado).getPropertyValue("background-color");

                var hexadecimal = rgbToHex(colorFondo);

                colorLabel.textContent = hexadecimal;

                colorInput2.value = hexadecimal;

                colorLabel.style.color = hexadecimal;
            }

            function rgbToHex(color) {
                var valores = color.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);

                function componentToHex(c) {
                    var hex = parseInt(c).toString(16);
                    return hex.length == 1 ? "0" + hex : hex;
                }

                var hexadecimal = "#" + componentToHex(valores[1]) + componentToHex(valores[2]) + componentToHex(valores[3]);
                return hexadecimal;
            }

            var radios = document.querySelectorAll("#colorpicker2 input[type='radio']");
            radios.forEach(function (radio) {
                radio.addEventListener("click", function () {
                    cambiarColorLabel2();
                });
            });

            cambiarColorLabel2();
        });

        document.addEventListener("DOMContentLoaded", function () {
            function cambiarColorLabel3() {
                var colorpicker = document.getElementById("colorpicker3");
                var colorLabel = document.getElementById("colorLabel3");
                var colorInput3 = document.getElementById("colorInput3");

                var liSeleccionado = colorpicker.querySelector("input[type='radio']:checked").parentElement;

                var colorFondo = window.getComputedStyle(liSeleccionado).getPropertyValue("background-color");

                var hexadecimal = rgbToHex(colorFondo);

                colorLabel.textContent = hexadecimal;
                colorInput3.value = hexadecimal;
                colorLabel.style.color = hexadecimal;
            }

            function rgbToHex(color) {
                var valores = color.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);

                function componentToHex(c) {
                    var hex = parseInt(c).toString(16);
                    return hex.length == 1 ? "0" + hex : hex;
                }

                var hexadecimal = "#" + componentToHex(valores[1]) + componentToHex(valores[2]) + componentToHex(valores[3]);
                return hexadecimal;
            }

            var radios = document.querySelectorAll("#colorpicker3 input[type='radio']");
            radios.forEach(function (radio) {
                radio.addEventListener("click", function () {
                    cambiarColorLabel3();
                });
            });

            cambiarColorLabel3();
        });

    </script>

</body>

</html>